<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="it" xml:lang="it"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Claudio Comandini">

<title>Grand Tour BookWineBar - Il continuo ritorno della Dama Bianca</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nessun risultato",
    "search-matching-documents-text": "documenti trovati",
    "search-copy-link-title": "Copiare il link nella ricerca",
    "search-hide-matches-text": "Nascondere i risultati aggiuntivi",
    "search-more-match-text": "ci sono altri risultati in questo documento",
    "search-more-matches-text": "ulteriori risultati in questo documento",
    "search-clear-button-title": "Pulire",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancellare",
    "search-submit-button-title": "Inviare",
    "search-label": "Ricerca"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Grand Tour BookWineBar</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Ricerca"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Attiva/disattiva la navigazione" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../diario.html#category=Claudio Comandini"> 
<span class="menu-text">Claudio Comandini</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../scritture.html"> 
<span class="menu-text">Scritture</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../contatti.html"> 
<span class="menu-text">contatti</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/groups/4880518/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/tweet_scritture"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.facebook.com/search/scritturemagazine"> <i class="bi bi-facebook" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:grandtour.frascati@gmail.com"> <i class="bi bi-envelope" role="img" aria-label="Email">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Il continuo ritorno della Dama Bianca</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">antropologia</div>
                <div class="quarto-category">Claudio Comandini</div>
                <div class="quarto-category">filosofia</div>
                <div class="quarto-category">letteratura</div>
                <div class="quarto-category">narrazioni</div>
                <div class="quarto-category">poesia</div>
                <div class="quarto-category">società</div>
              </div>
                  </div>
  </div>
  <div class="quarto-title-meta">
      <div>
      <div class="quarto-title-meta-heading">di</div>
      <div class="quarto-title-meta-contents">
               <p>Claudio Comandini </p>
            </div>
    </div>
      <div>
      <div class="quarto-title-meta-heading">Data di Pubblicazione</div>
      <div class="quarto-title-meta-contents">
        <p class="date">11 ottobre 2016</p>
      </div>
    </div>
    </div>
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<div class="quarto-about-marquee content">
  <div class="about-image-container">
    <img src="/images/2016/10/parlamento-fantasma.jpg" class="about-image " style="width: 100%;">
  </div>
  <div class="about-contents">
     <main class="content quarto-banner-title-block" id="quarto-document-content">
<p><em>Piccolo viaggio nel folklore tedesco alla ricerca del fantasma di una donna.</em></p>
<p>Puoi incontrarla ovunque e in ogni momento, sospesa tra assenza e presente, terribile e inevitabile così come possono esserlo amore e morte. Si rivela e si nasconde, accennandosi al di là del vero e del falso. Non ha occhi, né naso, né bocca; fatta di luce, lascia tracce oscure. Uno spettro di donna attraversa i secoli come fossero stanze: nei paesi tedeschi ogni epoca ne porta il riflesso. Ora che non ci sei più, mi sembra come se i suoi evanescenti contorni fossero gli stessi tuoi.</p>
<p>La <em>Weiße Frau</em> appare al castello di Bayreuth nel 1446: il suo corpo, come recita la testimonianza degli archivi Hoenzollern, <em>«non è che un chiarore biancoperla dalla forma piramidale»</em>. Trova un nome nel XVIII sec., quando il principe Giorgio D’Assia-Itter la identifica con la contessa Agnese di Orlamünde, vedova di Ottone III, che uccise i propri due figli per seguire l’amato Alberto di Norimberga. La contessa trova poi pentimento, e nel 1280 fonda il monastero cistercense di Himmellkran, di cui diventa badessa. Invece, il principe Giorgio, che ne delinea con sufficiente precisione i tratti, muore senza discendenza, e la sua stirpe si estingue con lui.</p>
<p>Lo spettro è citato come uno degli elementi più tipici del folklore germanico nell’epistolario del grande umanista Erasmo da Rotterdam. Sembra quasi di vederla: la Dama Bianca si muove lenta e solenne, accenna un inchino se la incontri, parla con <em>«tono di donna vedova»</em> e non ama le cattive parole e le bestemmie, al punto di tirare sassi se le sente pronunciare. Vuole che i poveri ricevano un piatto di minestra. Ha con sé chiavi <em>«che aprono ogni porta»</em>, il suo apparire significa morte o qualche altro cambiamento (1).</p>
<p>La figura affonda le sue origini negli spiriti della natura e nelle Norne teutoniche (2) e trova riferimenti con la figura di Holda la misericordiosa, dea del focolare e dell’inverno, che veglia sulle fertilità e i nascituri ed è matrona delle filatrici (3). Lo sviluppo del protestantesimo, contrario al culto di Maria, conferisce alla divinità femminili dell’antico folcklore e quindi alla Weiße Frau particolare pregnanza. Lei è la neve che scuote il proprio letto di piume e risveglia i meli in primavera.</p>
<p>Su una palude innevata prende forma Berlino, che nasce come unione di villaggi nel 1307; nel 1451 è nominata capitale del Brandeburgo e viene costruito il castello dello Stadtschloß. La città nel 1539 diventa protestante, accompagnando la definizione di una Germania non più disponibile a riconoscersi nel modello di Roma. Nel 1598 la Dama Bianca appare presso lo Stadtschloß a Giovanni Giorgio di Brandeburgo prossimo alla morte; fervente luterano, il principe elettore ha tre mogli e quindici figli. Nel 1640 la guida del ducato è presa dagli Hohenzollern. La Weiße Frau diventa il loro “fantasma di famiglia”, ma anche i castelli di Český Krumlov, Schönbrunn, Levoča, Gorizia, Duino e Padernello hanno una Dama Bianca, che si colora di varietà locali.</p>
<p>Presta così fattezze terrene allo spettro Berta von Rosenberg di Neuhaus, nobildonna boema del XV sec., il cui spettro appare nel dicembre 1698 pronunciando queste parole: <em>«Vieni, giudica i vivi e i morti, io attendo il giudizio divino.»</em> L’anno precedente, Eugenio di Savoia con la battaglia di Zenta conquista Sarajevo; l’anno successivo, la pace di Carlowitz permette ad una coalizione di Austria, confederazione Polacco-Lituana, Moscovia e Venezia di strappare numerosi territori ai Turchi: Croazia, Ungheria, Slavonia e Transilvania; Podolia e Ucraina; Azov; Dalmazia, Egina, Morea e Santa Maura. Oggi come ieri, gli equilibri geopolitici si assestano precari attorno ai loro fragili confini. Il giudizio continua a farsi attendere.</p>
<p>Leibniz, dedicando la <em>Monadologia</em> al principe Eugenio, considera come le diverse prospettive si armonizzino e ogni porzione rappresenti l’intero mondo. Nel 1701, mentre il filosofo a Berlino fonda l’Accademia delle Scienze, Federico Hohenzollern si sgancia dalla corona polacca e sotto il vassallaggio del Sacro Romano Impero viene nominato quale primo re “in” Prussia. Nel 1713 Sofia Luisa, sua terza moglie, gli appare vestita di bianco e sporca di sangue: è ferita, e ha preso le fattezze della Dama Bianca; il monarca dopo pochi giorni muore. I <em>Junker</em> portano a sviluppo un’aristocrazia di piccoli possidenti che, assumendo nello sviluppo capitalistico il ruolo proprio alla borghesia, imprimono particolare sviluppo allo <em>Sonderweg</em> tedesca.</p>
<p>Nuove forze stanno plasmando il mondo e l’armonia delle sue prospettive. Presso gli Asburgo, il principe d’Hesse avvista la Dama Bianca nel proprio castello la sera del 15 ottobre 1792; il giorno dopo Maria Antonietta, insieme alla sua idea di diritto reale divino sono decapitate a Parigi dal tribunale rivoluzionario. 10 ottobre 1806, sono in corso le guerre napoleoniche: Ludovico Ferdinando Hohenzollern, fratello dell’imperatore Federico II, sta suonando il pianoforte. Lui e il suo aiutante di campo Nostiz vedono una Dama Bianca; il principe muore in battaglia. Poco prima di morire è vista nel 1861 da Federico Guglielmo IV, già da tempo costretto a paralisi e demenza (4).</p>
<p>Nel 1871 Berlino diventa capitale dell’impero prussiano. Il fantasma aristocratico si democratizza, e Theodore Fontane ci racconta come il suo passaggio accompagni il turbamento della giovane Effi Briest, dotata d’ogni virtù eppure costretta alla menzogna dall’assenza di un sentimento puro (5). Da parte sua, la nobiltà viene spodestata, e nemmeno temperamento libertario e culto della bellezza riescono a risparmiare dalla visione del fantasma. Infatti, nel 1898, l’imperatrice austriaca Sissi confida alla dama di compagnia di averlo avvistato: viene quindi assassinata a Ginevra dall’anarchico italiano Luigi Lucheni. Poco prima della grande rissa che uccise l’Europa, il maresciallo prussiano Hindeburg, ospite al castello di Ostrau nell’Anhalt, vede la Dama Bianca passare, ed è lui a fare l’inchino (6).</p>
<p>Gli imperi d’ogni osservanza vanno incontro alla loro fine. Un’altra guerra esalta e distrugge Germania e lo Stadtschloß va via, ne viene un’altra ancora ed è demolito anche Palast der Republick, il suo sostituto socialista. Mentre è in corso l’ennesima crisi viene ricostruito l’antico castello Hohenzollern. Gli interessi che hanno spezzato l’Europa in blocchi ne ridefiniscono il fantasma. Un mondo disarmonico senza porte e finestre di cui nessun dio sembra avere le chiavi. Il giudizio si rinnova ogni volta parziale, e né i vivi che sono morti, né i morti che sono vivi, si aspettano più giustizia.</p>
<p>Gli spettri ci sono e non ci sono: così, non possano fare a meno di tornare di continuo. Non è però una particolare devozione a favorirne il manifestarsi: piuttosto, la disponibilità alle visioni di fantasmi è segno di un credo degradato, compiaciuta di spiriti di proporzioni più modeste di quelli propriamente divini, legittimata non dalle suggestioni della fede ma da criteri scientifici. Come quelli che nel 1929 permetto a Johannes Illig nella <em>«Deutsch Magazin der Parapsychologie»</em> a dare alla Dama Bianca una definizione sufficientemente precisa: <em>«Essere etereo, fluttuante, apparentemente animato, generalmente invisibile»</em>.</p>
<p>È nella natura tanto degli spiriti quanto dei fenomeni di costume la tendenza a diffondersi. Quindi, così come farà per la gazzosa trasformandola e riesportandola in Sprite, l’America rielabora motivi e formula della Dama Bianca nella figura dell’autostoppista fantasma, la cui storia sempre uguale riconduce ogni volta a quell’assenza di meta che ormai segna ogni percorso. Su queste strade possiamo raccattare qualsiasi fantasma, ma siamo ormai smaliziati sul loro conto, e non crediamo più a morti che diventano spettri: i fantasmi veri sono quelli degli ideali. E, in un modo sorprendente, come segnala il filosofo Georg Simmel, ne avvertiamo la vita in maniera maggiore rispetto a quando <em>«il loro contenuto ci riempiva e trasfigurava»</em> (7).</p>
<p>Se gli ideali sono morti, noi siamo ancora più suggestionabili e solleciti nei loro riguardi, pur se soltanto nelle forme della paura, della curiosità o del fanatismo; l’ideale è quindi cercato in qualcosa che non ne è portatore e che addirittura lo ostacola, portando così alla sparizione di ogni cambiamento effettivo. Anche la morte diventa fantasma, ma nessuno è felice: piuttosto, di fronte alle enormi possibilità di cui disponiamo per decidere quando e come impartire morte a noi stessi e ad altri, perdiamo la stessa voglia di vivere. Nella giostra di orrori quotidiani quali attentati terroristici, serial killer, snuff movie, lo stesso morire appare ormai più futile di qualche spettro demodé. Nelle vite personali, con la scomparsa del lutto la stessa accettazione del decedere rimane sospesa: la morte non è né assente né presente. Ne rimuoviamo l’incombere e, per sempre giovani e da sempre decrepiti, rimaniamo seppelliti vivi tra vite artificiali, fantasmi di fantasmi.</p>
<p>La Dama Bianca è il dono di un amore che gli uomini ricevere non sanno. Lascia tracce dolorose, eppure permette di scampare dagli stessi pericoli a lei fatali. È il sopravvivere al quale vita e morte devono il loro stesso segno. Passa leggera, vestita di bianco, con un sorriso sulle labbra che non ha, trafigge gli sguardi altrui con gli occhi di cui è priva. Parla con voce di vedova, ha con sé molte chiavi: siamo noi ad averla perduta, lei ti può sempre ritrovare.</p>
<p>Ora è qui a Berlino, sulla metropolitana. Dona ad un povero un Euro perché mangi qualcosa, e fa un inchino. In qualche modo, mi ricorda te, ormai fantasma per conto tuo. È qui di fronte a me, in piedi, avvolta nel suo bianco vestito, la vedo, e vedo che il vetro dall’altra parte del vagone ne restituisce solo un riflesso madreperla. Scende, la seguo. Sulla strada la avvicino, cerco un nome per chiamarla. La sua forma si confonde con la neve. Si volta, è sparita. Sparisco anch’io.</p>
<p>•</p>
<ol type="1">
<li><p>Cesare Baudi di Vesme, <em>Geschichte des Spititismus</em>, 1900.</p></li>
<li><p>Kevin Crossley-Holland, <em>The Norse Myths</em>, 1980.</p></li>
<li><p>Jacob Grimm, <em>Deutsche Mythologie</em>, 1835.</p></li>
<li><p>Filippo Di Leo, <em>Enciclopedia dei fantasmi e degli spiriti</em>, 2002.</p></li>
<li><p>Theodore Fontane, <em>Effi Briest</em>, 1895.</p></li>
<li><p>Gianmario Andrico, <em>La vera storia della Dama Bianca</em>, 2003.</p></li>
<li><p>George Simmel, <em>Tagebuch</em>, 1918.</p></li>
</ol>
<p>•</p>
<p><em>Fotografia: Parlamento fantasma - Berlino, gennaio 2006.</em></p>


</main> 
  </div>
</div>
 <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiato!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiato!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/grandtour\.shop");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>