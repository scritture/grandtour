<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="it" xml:lang="it"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Antonio Gurrado">

<title>Grandtour Book wine bar - Unioni incivili e strutture parentali: dopo Lévi-Strauss</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nessun risultato",
    "search-matching-documents-text": "documenti trovati",
    "search-copy-link-title": "Copiare il link nella ricerca",
    "search-hide-matches-text": "Nascondere i risultati aggiuntivi",
    "search-more-match-text": "ci sono altri risultati in questo documento",
    "search-more-matches-text": "ulteriori risultati in questo documento",
    "search-clear-button-title": "Pulire",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancellare",
    "search-submit-button-title": "Inviare",
    "search-label": "Ricerca"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Grandtour Book wine bar</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Ricerca"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Attiva/disattiva la navigazione" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../diario.html#category=Claudio Comandini"> 
<span class="menu-text">Claudio Comandini</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../scritture.html"> 
<span class="menu-text">Scritture</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">contatti</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/groups/4880518/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/tweet_scritture"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.facebook.com/search/scritturemagazine"> <i class="bi bi-facebook" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:grandtour.frascati@gmail.com"> <i class="bi bi-envelope" role="img" aria-label="Email">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Unioni incivili e strutture parentali: dopo Lévi-Strauss</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">antropologia</div>
                <div class="quarto-category">politica</div>
                <div class="quarto-category">Rivista</div>
                <div class="quarto-category">società</div>
              </div>
                  </div>
  </div>
  <div class="quarto-title-meta">
      <div>
      <div class="quarto-title-meta-heading">di</div>
      <div class="quarto-title-meta-contents">
               <p>Antonio Gurrado </p>
            </div>
    </div>
      <div>
      <div class="quarto-title-meta-heading">Data di Pubblicazione</div>
      <div class="quarto-title-meta-contents">
        <p class="date">25 febbraio 2016</p>
      </div>
    </div>
    </div>
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<div class="quarto-about-marquee content">
  <div class="about-image-container">
    <img src="/images/2016/02/unioni-civili-678x381.jpg" class="about-image " style="width: 100%;">
  </div>
  <div class="about-contents">
     <main class="content quarto-banner-title-block" id="quarto-document-content">
<p><em>Laddove&nbsp;le leggi definiscono i contesti sociali, l’ossessione contemporanea di legiferare su tutto rischia di annullare tanto il diritto, quanto la società. Al riguardo, non è consolante constatare che la legge sulle unioni civili, approvata dal parlamento italiano verso la fine di febbraio, oltre a far scadere il dibattito a propaganda, ha lasciato in sospeso due punti decisivi. Il primo, riguarda il cadere dell’obbligo di fedeltà nei rapporti matrimoniali che, per quanto denunciato come tentativo di “ferimento” da alcune associazioni gay, si progetta ora di estendere anche alle unioni eterosessuali: tuttavia, non bisogna essere bacchettoni per riconoscere che omettere il riferimento ad una esclusività forte “solennizza” il capriccio e avvilisce l’impegno reciproco, minando l’intimità e lo stesso erotismo. Invece, il secondo punto ha posto un limite alla possibilità di adozione, con l’intento di impedire di fare figli senza il “concorso” riproduttivo dei due sessi: del resto, anche il più sfrenato libertino può rendersi conto che permettere adozioni indiscriminate rende definitivamente i bambini strumenti di “compensazioni” meramente personali, e che uteri in affitto e riproduzioni in vitro aprono la strada alla progettazione ingegneristica della vita. Tali tensioni sono pienamente aderenti al culto del mercato, e portano fuori da ogni idea di gratuità dell’esistere e del relazionarsi: nel seguirle, il movimento gay sembra ormai lontano dall’antica matrice controculturale, per diventare piuttosto sintomatico dell’indifferentismo di una società permissiva dove la trasgressione è div entata conformismo. Tuttavia, comprendere cosa accade chiede di distinguere fatti e idee, superando la logica del “mi piace” e il limite dei propri gusti e tendenze: vanno quindi maggiormente analizzati i caratteri che determinano i ruoli sessuali, compresi quelli omosessuali, i quali a loro volta non esauriscono l’orizzonte dei diritti delle coppie di fatto. Per ritrovare la possibilità di un pensiero critico capace di pensare le differenze senza schiacciarle su nuove omologazioni, si può riflettere su alcuni aspetti del pensiero di Lévi-Strauss, per cui un sistema di scambi e doni permette che dall’acquisizione della parentela compiuta da due individui di sesso opposto, attraverso la mediazione della regola giuridica, derivi la famiglia. Il matrimonio unisce gruppi e non ha mai carattere privato, le catene parentali precedono temporalmente l’esistenza della famiglia: pur non essendo propriamente “naturale”, il nucleo famigliare padre-madre-figlio è universalmente alla base della struttura sociale complessiva e degli ordinamenti giuridici, ed è regolato dall’interdizione dell’incesto, che limita l’arbitrio all’interno della famiglia aprendo al rapporto con il mondo. E quali altre regole sono in grado di ridurre arbitri ed esercitare influenza costitutiva? È davvero necessario che una qualsiasi pulsione sia riconosciuta in termini di legge? La frenesia di realizzazione individuale attraverso amori tutti eccezionali eppure equiparati e intercambiabili, quale società e quale cultura è in grado di trasmettere?</em></p>
<p>Guardate la campagna #svegliatitalia (“Chi ama i diritti, li vuole per tutti”): inscena coppie etero e omo bellissime e ammiccanti, disinibite ma innocenti, colte in un abbraccio a letto mentre si promettono eterna felicità e notti di fuoco ridendo di gioia in uno scenario da backstage del Mulino Bianco, incommensurabile rispetto alla scabra realtà dei fatti quotidiani. Allo stesso modo, a fine Seicento, Pierre Bayle postulava una società di atei virtuosi migliore di tutte le nazioni dilaniate dalle guerre di religione ma se la figurava composta solo da tanti Spinoza, senza considerare l’ipotesi che anche fra gli atei potessero esserci delinquenti o imbecilli che le leggi avrebbero dovuto tenere a freno.</p>
<p>Quella immaginata da Bayle o da #svegliatitalia è <em>«una società senza società»</em>, espressione di Lévi-Strauss che ho ritrovato in una monografia di Lorenzo Scillitani dal titolo respingente (<em>La filosofia del diritto di famiglia nell’antropologia strutturale di Claude Lévi-Strauss</em>, Rubbettino, 168 pp., 15 euro) ma utilissima a radicare il dibattito attorno alla famiglia su <em>«una filosofia del diritto che non voglia cadere preda delle mode culturali dettate dal transeunte»</em> senza ambizioni propagandistiche, il contrario cioè di quanto avviene oggi.</p>
<p>Discutendo dei diritti delle coppie di fatto si dovrebbe tenere presente l’aporia rilevata da Lévi-Strauss, che Sartre riformula così: <em>«Il diritto non può dedursi dal fatto, il fatto non può produrre il diritto, il diritto è un fatto e il fatto genera il diritto»</em>. Bell’impasse da cui Lévi-Strauss si districa enucleando la giuridicità della struttura antropologica basata su un complesso sistema di scambi e doni fra i contraenti: l’<em>alliance</em>, che non coincide col matrimonio anche se ogni matrimonio lo è.</p>
<p>Nel sistema di Lévi-Strauss le usanze di popoli lontanissimi collimano nel fatto che ovunque il diritto è nato come diritto matrimoniale e familiare, ovunque basato sulla legge fondamentale della proibizione dell’incesto. La civiltà umana va pertanto considerata civiltà etico-giuridica di famiglie poiché la società, che noi consideriamo libero accordo di individui, è invece <em>«un reticolo di relazioni di varia natura inscritte in alleanze matrimoniali e parentele»</em>.</p>
<p>È una formidabile arringa in favore della famiglia naturale tenuta da un antropologo sul quale non si può apporre l’etichetta di baciapile o di conservatore.</p>
<p>Marc Augé gli riconosceva il merito di avere restituito un corpo all’idea di natura umana, in contrapposizione all’antropologia marxiana che concepiva la libertà come estranea (a tratti avversa) alla natura. Alla traduzione in termini giuridici della naturalità della famiglia Lévi-Strauss preferisce la rivendicazione del fatto che il diritto deriva naturalmente dall’istituzione familiare: <em>«Se l’universalità della famiglia non è effetto di una legge naturale, come si spiega che la si trova dappertutto?»</em>. E come mai segue <em>«proprietà invarianti»</em>?</p>
<p>Ossia, trae origine dal matrimonio e comprende mariti, mogli e figli uniti tra loro non solo da legami giuridici artificiali ma da obblighi religiosi e da un reticolo di divieti; tanto scriveva ne <em>La famiglia</em>, definendola <em>«fenomeno praticamente universale»</em> fondato <em>«sull’unione più o meno duratura, ma socialmente approvata, di due individui di sesso diverso che fondano una convivenza, procreano e allevano figli»</em>.</p>
<p>Qui sta il punto. Cercando il comun denominatore della famiglia fra civiltà diversissime, Lévi-Strauss ravvisa una distinzione fra il matrimonio come <em>«unione legale socialmente approvata»</em> e le altre <em>«unioni temporanee o permanenti che risultano dal consenso»</em>; la famiglia deriva dalla parentela (non il contrario) tramite una regola giuridica che trasforma l’<em>alliance</em> da naturale in socialmente riconosciuta; da <em>«necessità naturale»</em> in <em>«fatto universale»</em>, cioè da accoppiamento in matrimonio. Quest’ultimo è l’unica forma di diritto universalmente praticata e accettata, che preesiste storicamente e concettualmente alla legge stessa.</p>
<p>Una campagna che vuol far svegliare l’Italia assalta l’arretratezza dell’idea di natura rispetto alla cultura galoppante; Lévi-Strauss dimostra che le regole d’ingaggio non sono queste. La proibizione dell’incesto, universale regola che fonda la famiglia, non è un retaggio della natura né un’artificiale imposizione giuridica ma <em>«è la cultura stessa»</em> in quanto si colloca su un confine: è una regola che <em>«serra nella società ciò che le è estraneo ma trattiene nella natura ciò che è suscettibile di superarla»</em>; è la regola che trasforma l’accoppiamento in <em>alliance</em>. La cultura non è artificiale, non può essere accomodata con leggi a tavolino <em>«perché consta di regole di comportamento che non sono state inventate, le cui funzioni non vengono comprese da chi vi obbedisce»</em>.</p>
<p>Ne <em>Le strutture elementari della parentela</em> spiega che la proibizione dell’incesto <em>«non è altro che l’affermazione che in materia di relazioni fra i sessi non si può fare qualsiasi cosa»</em>, ossia che non si può trasformare in norma un’eccezione e poi fingere che sia un tutto indistinto. L’incesto viene proibito perché consiste nell’<em>«ottenere da sé e per sé invece di ottenere da altri e per altri»</em>, cedendo al principio di indeterminazione della natura che per lui si manifestava <em>«nel carattere arbitrario dell’accoppiamento»</em> e che oggi potremmo identificare nella smania di realizzazione individuale per mezzo di amori tutti eccezionali e tutti equiparati.</p>
<p>Ma la bellezza di Lévi-Strauss è che, essendo una persona seria, parlando di matrimonio non parla mai d’amore. Parla di relazione fra i sessi che non è mai simmetrica e mai intercambiabile, parla di matrimonio che <em>«non è mai stato un affare privato»</em> perché <em>«unisce gruppi, non individui»</em>. Mica per niente in Nuova Guinea si dice che non ci si sposa per avere una moglie ma per avere dei cognati.</p>
<p>Invece <em>«sotto l’egida di un razionalismo giuridico e formalista»</em>, scrive con preveggenza in <em>Tristi tropici</em>, <em>«ci costruiamo un’immagine del mondo e della società in cui tutte le difficoltà sono sottoposte a una logica artificiosa, e non ci rendiamo conto che l’universo non è formato dagli oggetti di cui parliamo»</em>: esattamente come quando pensiamo a una società di atei virtuosi o a una riforma con diritti patinati.</p>
<p>Ma è un ragionamento complesso e, per sentirsi superiori, è molto più facile nascondersi dietro un manifesto con due tizi che si baciano ridendo.</p>
<p>•</p>
<p><a href="http://www.ilfoglio.it/articoli/2016/01/30/il-diritto-nasce-dal-matrimonio-larringa-in-favore-della-famiglia-naturale-di-lvi-strauss___1-v-137648-rubriche_c128.htm">Antonio Gurrado: <em>Il diritto? Nasce dal matrimonio. L’arringa in favore della “famiglia naturale” di Lévi-Strauss,&nbsp;</em>«Il Foglio.it» 30/01/2016.</a></p>


</main> 
  </div>
</div>
 <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiato!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiato!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>