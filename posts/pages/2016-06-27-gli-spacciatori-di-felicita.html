<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="it" xml:lang="it"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Benedetto Vecchi">

<title>Grand Tour - Gli spacciatori di felicità</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nessun risultato",
    "search-matching-documents-text": "documenti trovati",
    "search-copy-link-title": "Copiare il link nella ricerca",
    "search-hide-matches-text": "Nascondere i risultati aggiuntivi",
    "search-more-match-text": "ci sono altri risultati in questo documento",
    "search-more-matches-text": "ulteriori risultati in questo documento",
    "search-clear-button-title": "Pulire",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancellare",
    "search-submit-button-title": "Inviare",
    "search-label": "Ricerca"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Grand Tour</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Ricerca"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Attiva/disattiva la navigazione" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../diario.html#category=Claudio Comandini"> 
<span class="menu-text">Claudio Comandini</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../scritture.html"> 
<span class="menu-text">Scritture</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../contatti.html"> 
<span class="menu-text">contatti</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/groups/4880518/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/tweet_scritture"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.facebook.com/search/scritturemagazine"> <i class="bi bi-facebook" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:grandtour.frascati@gmail.com"> <i class="bi bi-envelope" role="img" aria-label="Email">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Gli spacciatori di felicità</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">filosofia</div>
                <div class="quarto-category">politica</div>
                <div class="quarto-category">società</div>
              </div>
                  </div>
  </div>
  <div class="quarto-title-meta">
      <div>
      <div class="quarto-title-meta-heading">di</div>
      <div class="quarto-title-meta-contents">
               <p>Benedetto Vecchi </p>
            </div>
    </div>
      <div>
      <div class="quarto-title-meta-heading">Data di Pubblicazione</div>
      <div class="quarto-title-meta-contents">
        <p class="date">27 giugno 2016</p>
      </div>
    </div>
    </div>
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<div class="quarto-about-marquee content">
  <div class="about-image-container">
    <img src="/images/2016/08/felicita-promesse-640x381.jpg" class="about-image " style="width: 100%;">
  </div>
  <div class="about-contents">
     <main class="content quarto-banner-title-block" id="quarto-document-content">
<p><em>La felicità è un diritto che deve essere garantito da qualcuno? Si&nbsp;può voler&nbsp;essere felici senza condannarsi ad una infelicità continua? È una condizione personale che prescinde da istituti e norme e anche da motivi contingenti? Possiamo davvero barattare tutta la sapienza della nostra storia per restare sospesi ad attimi che come bolle di sapone esplodono dopo un soffio? Siamo sicuri che quando di felicità ne parlano figure come gli antichi stoici, imperturbabili a tutto, e i futili messaggi pubblicitari, intenzionati a vendere qualsiasi fesseria, si riferiscano davvero allo stesso concetto? Siamo convinti che davvero tutti possano essere in grado di accedere ad una autentica personalità, proprio laddove la moltitudine striscia ancora all’ombra della statua dell’imperatore, implorando la grazia alla pietra? Comprendiamo che non rispettare una propria vocazione, che può essere chiamata daimon ma anche ‘genius’, e restare appesi alle appartenenze sociali, agli apparati e ai loro scopi, magari anche vantandosene, rappresenta la negazione del vivere civile? Le condizioni che l’antichità definiva rispettivamente quali di ‘beatus’ e ‘felix’, che corrispondono rispettivamente alla prosperità di beni e all’intima soddisfazione, in quale rapporto sono nelle diverse configurazioni concettuali nelle quali vengono pensate? Concetti quale il giusto mezzo aristotelico, l’imperativo categorico kantiano, cosa indicano ancora oggi? Siamo proprio sicuri che un mondo davvero felice possa essere immune al dolore e pensare soltanto a spassarsela? Una salvezza deve per forza vederci schiattare per realizzarsi oppure indica la liberazione dalla stessa morte? Siamo ancora in grado di aspirare ad una realizzazione di qualche tipo? Com’è possibile che l’utopia possa venir degradata da progetto politico a misura banalmente personale? Il rapporto tra piacere e virtù che relazione intrattiene con la misura capitalista del benessere? L’orizzonte dell’affermazione sociale ed economica è davvero capace di risolvere ogni esigenza umana? Sappiamo riconoscere la trappola che si nasconde nelle cosiddette politiche della felicità? E che all’alienazione sia stato tolto persino il suo aspetto socialmente costruttivo, mentre al massimo aspiriamo di regredire ad un naturalismo da bestiole, ce ne accorgiamo? Ci piace? Com’è possibile che la capacità di porre distinzioni si eclissi proprio dove è più necessaria? E riusciamo ad essere felici, aldilà di tutto, qualsiasi cosa possa significare? Oppure no? Il giornalista Benedetto Vecchi risponde ad alcune di queste domande recensendo l’ultimo libro del sociologo ed economista britannico&nbsp;William Davies.</em></p>
<p><strong>1. Sedurre e deludere</strong></p>
<p>Il carnet dei suoi prodotti è vario. Spazia da pillole che mettono a tacere tutte le inquietudini a promesse di un futuro radioso dove non ci sarà posto per dolore, fame, sofferenza, ma il core business è di quelli che non lasciano indifferenti, perché è il sogno inseguito da filosofi, preti, militanti politici di ogni tipo, visto che si tratta della felicità. Merce tanto pregiata quanto scarsa da diventare un manufatto sul quale si addensano, appunto, una miriade di stimati professionisti e una moltitudine di addetti alla sua produzione.</p>
<p>Ha il potere di un oggetto mutante del desiderio, che si adatta a ogni richiesta del singolo. E tuttavia, avverte William Davies nel libro <a href="https://www.amazon.it/Lindustria-felicit%C3%A0-politica-imprese-benessere/dp/8806229672/ref=sr_1_1_twi_pap_2?s=books&amp;ie=UTF8&amp;qid=1466168208&amp;sr=1-1&amp;keywords=l%27industria+della+felicit%C3%A0"><em>L’industria della felicità</em></a>&nbsp;(Einaudi, pp.&nbsp;233, €&nbsp;20), è una promessa quasi sempre non mantenuta. Sta di fatto che il potere seduttivo dell’industria della felicità sta nelle aspettative, sempre deluse, che continua ad alimentare.</p>
<p>Davies passa al setaccio secoli di filosofia, psicologia e tecniche di marketing in un confronto minuzioso con testi dimenticati ai margini delle rispettive discipline, evidenziando però il loro potere di condizionamento sul lungo periodo. Ne emerge un saggio che può essere inserito nella variegata costellazione teorica che, tra gli anni Settanta e Novanta del secolo scorso, ha cercato di spiegare la capacità del neoliberismo di costruire un consenso ampio, facendo leva proprio sulla promessa di felicità. In questa costellazione, trovano posto sociologi, storici e economisti della <em>new left</em> inglese e statunitense, ambito dove si è formato Davies.</p>
<p>Forti sono infatti gli echi delle analisi di Stuart Hall sulle capacità egemoniche di Margaret Thatcher, ma evidenti sono i riferimenti alle tesi di David Harvey sulla indubbia flessibilità e adattabilità ambientale del vangelo neoliberista. Ci sono inoltre riferimenti alla «politica della vita» di Nikolas Rose. Infine, anche se non viene mai citato, il metodo seguito dall’autore – costruire genealogie di un concetto – è quello inconfondibile di Michel Foucault.</p>
<p><strong>2. Ragionamenti da cane sciolto</strong></p>
<p>William Davies è tuttavia un cane sciolto, un eterodosso, un “maverik” insomma, come la collana dove è stato pubblicato il saggio. Seguire il filo dei suoi ragionamenti, costruito sulla minuta rassegna di studiosi, non è sempre facile, ma ne vale comunque la pena, perché questa Industria della felicità segnala, al di là delle intenzioni dell’autore, uno smottamento in atto nel neoliberismo. Infatti, dopo anni di retoriche sulla centralità dell’individuo proprietario, il neoliberismo sta compiendo un doppio salto mortale: deve riconoscere che gli animali umani non sono quegli esseri egoisti che perseguono solo i loro interessi, bensì sono individui sociali.</p>
<p>Il riconoscimento della natura sociale dell’animale umano non significa che l’individualismo venga archiviato. La massimizzazione del profitto individuale passa attraverso il riconoscimento che i rapporti sociali sono l’habitat che consente di realizzarlo. Una differenza non da poco per chi ha pensato di trasformare la realtà facendo leva su una sostanza tossica come è stata l’individuo proprietario. Nel linguaggio delle cosiddette scienze sociali siamo alla centralità del capitale sociale rispetto a quello umano. Non è un caso che le tesi sui social network, sulla reciprocità, sui legami deboli per le reti di prossimità nutrano ormai il lessico teorico e politico del neoliberismo dopo la crisi del 2007-2008.</p>
<p>William Davies avvia la sua critica del neoliberismo ricordando Jeremy Bentham. Il suo panopticon è sinonimo di una istituzione totale volta al controllo, alla costrizione, alla gestione di uno spazio che non prevede libertà e, cosa più rilevante per il tema di questo libro, alla felicità. Soltanto che Bentham ha scritto anche un piccolo testo dedicato al governo dove la felicità svolge invece un ruolo centrale. Un buon governo, annotava questo illuminista inglese atipico, deve facilitare la felicità dei cittadini, rinunciando però alle velleità filosofiche che definiscono cosa sia una buona società. È la psiche umana che occorre governare, depurandola da qualsiasi incongruità, contraddizioni, ambivalenze.</p>
<p><strong>3. L’approdo al nuovo mondo</strong></p>
<p>L’originalità del saggio di Davies sta però nel seguire gli echi, le assonanze di tale vision negli studi di biologi, filosofi, medici che si pongono il problema di capire i meccanismi della psiche umana. Dopo una dettagliata carrellata di studi, ricerche in laboratorio, esperimenti si arriva al Novecento, dove entra in scena Freud, studioso che sembra mettere al riparo la nascente psicoanalisi da ogni concezione deterministica della psiche umana, come attesta il saggio sul disagio della civiltà. Ma se Freud è rimasto fedele a questa convinzione anche quando ha lasciato il vecchio continente per il «nuovo mondo», ci sono stati altri medici, psicologi che hanno attraversato l’Atlantico, convinti che negli Stati Uniti avrebbero trovato il terreno adatto per fondare una scienza della psiche che facesse a meno degli influssi della filosofia e dove fosse possibile sviluppare una scienza dei sentimenti e delle passioni.</p>
<p>Il comportamentismo della psicologia sociale classifica i sentimenti e le reazioni umani all’interno di una cornice dove ogni reazione a determinanti stimoli poteva essere definita, prevista, quantificata matematicamente. La pubblicità, le analisi di mercato, persino le teorie liberiste degli economisti in fuga dalla Germania sono accomunati da una concezione della psiche che considerava come devianza facilmente cancellabile ogni manifestazione contraddittoria di sentimenti riducendola alla sua dimensione quantificabile, dunque sacrificabile se non facente parte di una maggioranza, statistica, rilevabile attraverso questionari o colloqui ravvicinati. È in questa contingenza che prende piede l’industria della felicità, considerata il simbolo proprio del neoliberismo.</p>
<p>Torna in queste pagine più volte la domanda del perché uomini e donne, relegati in uno stato di infelicità permanente, abbiano aderito alla weltanshauung neoliberista. La risposta di Davies si sofferma sul fatto che la promessa di felicità è considerata una concreta possibilità se il singolo è depurato da ogni vincolo per mettere in campo il proprio capitale umano per massimizzare i suoi profitti. Rilevante è il capitolo sulle modalità d’uso dello studio della psiche nelle fabbriche per superare l’organizzazione scientifica, strizzando l’occhio al lavoro in team e l’empowerment dei singoli. Certo il contraltare è la precarietà, ma l’impresa può facilitare il «libero» agire del capitale umano, semplificando così il perseguimento della felicità.</p>
<p>Non è dato sapere se l’amministratore delegato dell’Enel abbia letto questo saggio, ma la sua recente divagazione sulla necessità di terrorizzare un gruppo di dipendenti per convincere tutti gli altri sull’imperativo di introiettare il comando sul lavoro ha come background culturale proprio questa concezione della psiche come «organo» che reagisce, adattandosi, a stimoli esterni. Il benessere sul lavoro, ma anche al di fuori dell’attività lavorativa è possibile a patto che la mente venga addomesticata, manipolata, eterodiretta. All’impresa e al governo il compito di creare le condizioni affinché sia possibile la felicità. Le disuguaglianze crescenti, l’impoverimento, la riduzione degli spazi di libertà sono solo dettagli, residui di un passato destinati ad essere spazzati vita dal capitalismo ormai trionfante.</p>
<p>Ideologia, certo, ma egemone. Peccato che proprio l’individuo proprietario sia una distopia. Il centro della scena è infatti popolato non da uomini e donne spensierati e giulivi, ma da uomini e donne che manifestano sempre più disagio psichico, mentre aumenta il consumo di vari tipi di droga (dalla metanfetamina alla cocaina), degli psicofarmaci assunti come pastiglie di liquirizia, buoni cioè a stabilizzare un umore sempre sul punto di trasformarsi in ira e aggressività violenta, mentre la psicosomatica è il termometro che documenta l’insuccesso del neoliberismo, così come l’attitudine new-age è l’àncora di salvezza scelta per provare a farcela in un mondo che tradisce la promessa di felicità.</p>
<p><strong>4. Neuroplasticità del cervello</strong></p>
<p>Eppure l’industria della felicità non conosce crisi. Continua a prosperare su una concezione primitiva della psiche. Le ricerche di mercato, i sondaggi, i focus group sono ormai irrisi per la loro antiscientificità, ma la crescita dei big data attesta che la raccolta sulle informazioni sugli stati d’animo, sulle reazioni precognitive è un business fiorente. E se la psicoanalisi interroga se stessa e sul suo fallimento come disciplina, c’è sempre qualche sciamano che offre una spiegazione new-age sulle reazioni individuali. Oppure i centinaia di miliardi investiti su come mappare le reti neurali o le neuroplasticità del cervello segnalano che la psiche, la mente, il cervello sono l’oggetto del desiderio, quasi a significare che se si capisce fin nei minimi dettagli il funzionamento fisiologico del cervello, cadranno le resistenze alla manipolazione delle soggettività, elemento necessario, anzi indispensabile per raggiungere la felicità.</p>
<p>Sembra una <em>science fiction</em> scritta da un Philip K. Dick in ottima forma: sono invece i report stilati per documentare l’avanzamento di ricerche finanziate da facoltosi governi (Usa, Giappone e Cina). Quel che invece meno indagato è appunto lo spostamento sulla dimensione sociale che caratterizza l’animale umano. È infatti l’individuo sociale sul quale si concentrano le attenzioni degli spacciatori di felicità. In tempi non sospetti un signore con la barba scrisse di socialismo del capitale. L’industria della felicità è da intendere come il prototipo semmai di un «comunismo del capitale» che oltre a mettere a profitto sapere, conoscenza, linguaggio, si propone di rendere merce ad alto valore aggiunto proprio la umana produzione di soggettività.</p>
<p>Ma è in questa riscoperta dell’individuo sociale che emerge la fragilità del neo<img src="../../images/2016/06/Industria_felicita.jpeg" class="img-fluid" alt="Industria_felicita">liberismo, che deve essere nascosta con ogni mezzo necessario. Da qui la ferocia delle politiche di austerità, perché se il centro della scena è occupato dalla cooperazione sociale, diviene infatti difficile parlare di felicità come una materia inerte da spacciare in ogni dove. Semmai torna ad essere all’ordine del giorno la costruzione di un mondo dove bisogni e desideri non condannino all’infelicità. Con buona pace degli spacciatori di promesse che non saranno mai mantenute.</p>
<p>•</p>
<p><a href="http://ilmanifesto.info/gli-spacciatori-di-eterna-gioia/"><em>Benedetto Vecchi, “Gli spacciatori di eterna gioia”, «il manifesto» 20.06.2015.</em></a></p>
<p><em>Fotografia, Claudio Comandini, “Felicità promesse”, Arona luglio 2010.</em></p>


</main> 
  </div>
</div>
 <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiato!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiato!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/grandtour\.shop");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>