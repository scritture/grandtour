<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="it" xml:lang="it"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Claudio Comandini">

<title>Grand Tour - Bisogna saper vincere</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nessun risultato",
    "search-matching-documents-text": "documenti trovati",
    "search-copy-link-title": "Copiare il link nella ricerca",
    "search-hide-matches-text": "Nascondere i risultati aggiuntivi",
    "search-more-match-text": "ci sono altri risultati in questo documento",
    "search-more-matches-text": "ulteriori risultati in questo documento",
    "search-clear-button-title": "Pulire",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancellare",
    "search-submit-button-title": "Inviare",
    "search-label": "Ricerca"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Grand Tour</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Ricerca"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Attiva/disattiva la navigazione" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../diario.html#category=Claudio Comandini"> 
<span class="menu-text">Claudio Comandini</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../scritture.html"> 
<span class="menu-text">Scritture</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../contatti.html"> 
<span class="menu-text">GRAND TOUR BookWineBar</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/groups/4880518/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/tweet_scritture"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.facebook.com/search/scritturemagazine"> <i class="bi bi-facebook" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:grandtour.frascati@gmail.com"> <i class="bi bi-envelope" role="img" aria-label="Email">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Bisogna saper vincere</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Claudio Comandini</div>
                <div class="quarto-category">politica</div>
                <div class="quarto-category">società</div>
              </div>
                  </div>
  </div>
  <div class="quarto-title-meta">
      <div>
      <div class="quarto-title-meta-heading">di</div>
      <div class="quarto-title-meta-contents">
               <p>Claudio Comandini </p>
            </div>
    </div>
      <div>
      <div class="quarto-title-meta-heading">Data di Pubblicazione</div>
      <div class="quarto-title-meta-contents">
        <p class="date">26 giugno 2016</p>
      </div>
    </div>
    </div>
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<div class="quarto-about-marquee content">
  <div class="about-image-container">
    <img src="/images/2016/06/finita-la-carta-678x381.jpg" class="about-image " style="width: 100%;">
  </div>
  <div class="about-contents">
     <main class="content quarto-banner-title-block" id="quarto-document-content">
<p><em>Elezioni amministrative in Italia: deciso cambio di rotta oppure semplice smottamento&nbsp;dell’esistente? Quali gli obiettivi minimi per una politica&nbsp;capace di ritrovare dignità e funzione?</em></p>
<p>La Raggi è come un treno che è stato aspettato pur non sapendo dove porta: il binario vuoto dove proiettare frustrazioni scambiate per desideri; a molti va bene così, e questo basta a dargli realtà. Una sua vittoria romana era altamente probabile, dato che per una propria&nbsp;peculiare attitudine la Città Eterna sa unirsi soprattutto per castigare i potenti. Così, ci si augura che questa ragazzotta possa destabilizzare definitivamente la sperduta capitale, la sua remota provincia e pure quella chiavica del PD, favorendo l’erculea fatica di una ripulitura complessiva. E tuttavia, forse nemmeno il terremoto più grande potrà smuovere appena il cronico ritardo istituzionale e culturale dell’Urbe.</p>
<p>Tali&nbsp;esiti non sono&nbsp;né una catastrofe, né un successo, ma rappresentano comunque una sorta di liberazione. Infatti, il vecchio carrozzone politico sta andando definitivamente a fondo, ed è inutile che intimidisca l’elettorato con la sua stantia retorica, anche perché&nbsp;le nostre città non sono più sufficienti a se stesse da tempo. Ad ogni modo, se certe vittorie parziali sono sintomo di una decomposizione irreversibile, nei cui confronti ogni trionfalismo è pura farneticazione, chiunque vinca dovrà comunque perdere, in quanto costretto a smantellare le basi del suo stesso potere e così permettere di riconfigurare baracca e burattini in modi che possano finalmente rispondere ai bisogni comuni.</p>
<p>Si è aperta comunque una stagione interessante, anche più incerta delle corse della metro di Roma, nella quale potranno convivere gli aspetti peggiori di ogni prospettiva: la Brexit destabilizza quanto resta di un Unione Europea ridotta a provincia di una moneta che non vale poi tanto. Le riforme di Renzi, indipendentemente se passano o no, stanno già destabilizzando un Paese che stabile non è mai stato, ed è ancora incerto se rappresentano il preludio di una riconfigurazione radicale di forme istituzionali e progetti sociali, oppure segno del radicalizzarsi di conflitti al ribasso e di sistematiche regressioni.</p>
<p>Il PD ha perso da (quasi) tutte le parti: meglio così, non ne era rimasto quasi più nulla. Il M5S vince (non ovunque) contro tutti in nome di niente: sarà difficile dare esiti coerenti ai suoi risultati. Se assolutizzare una singola questione è fuorviante, per comprendere gli eventi nel loro complesso occorre aspettare che il caos faccia il proprio lavoro. Certamente, il “pazzesco” con cui la Raggi commenta l’esito del voto è meno eloquente della lacrime al balcone del Campidoglio, ma il ritardo nelle nomine di una giunta sono indice di un profondo dissesto istituzionale, per risolvere il quale non sembra affatto sufficiente un cambio puramente politico.</p>
<p>Il M5S sicuramente risponde ad un bisogno di partecipazione che non trovava più rappresentanza, ma deve crescere e far crescere propri esponenti ed elettori: il rischio già sin troppo evidente è quello di ridurre l’eterogeneità ad un’accozzaglia priva di direzione, e così tradire lo sviluppo dei movimenti e delle battaglie a cui si vorrebbe dare spazio, per lasciarsi irretire dalle ambigue muse del malcontento complottista e dalla comunicazione facilona. In una parola, serve <em>educazione</em>.&nbsp;L’educazione che tutti potrebbero ricavare è che tirare a campare non serve più a niente e a nessuno: così, tanto vale smettere di chiedere favori per essere complici dei propri stessi mali, e anche&nbsp;ostentare impotenti parate di polemiche puramente personalistiche. Ma i giochi al ribasso, privi di ogni efficacia nel permettere cambiamenti effettivi, sono troppi: non sarà facile rinunciarvi.</p>
<p>Ad ogni modo, non è più possibile essere provinciali: tutti viviamo nello stesso mondo e lo stesso concetto di provincia è destinato a sparire. La priorità più urgente è nel gestire la definitiva transizione alle aree metropolitane, e così preparare nuove istituzioni, nuove regole, nuovo ceto dirigente. Tuttavia, chiedere programmi e posizioni chiare sembra ancora troppo: tuttora impazza il politico di allevamento, buffo nell’atteggiarsi a praticone pur essendo piuttosto goffo, irresistibile quando si ammanta di grottesche pretese culturali. Il problema è che, nonostante tanti proclami post-ideologici, ancora ci si trascina dietro il più grande equivoco dell’impostazione ideologica moderna: quello che permette che politica e cultura si intralcino a vicenda, giustificandosi l’un l’altra al livello più basso possibile. Eppure, è davvero così difficile coltivare un efficace e sobrio pragmatismo amministrativo, che riconosca dei&nbsp;saperi esercitati con competenza i&nbsp;legittimi ruoli di critica e ricerca propri?</p>
<p>Una competenza culturale è necessaria laddove i cambiamenti del potere chiedono di essere compresi secondo categorie che non sono più quelle di ieri. Infatti, in tempi di anarco-capitalismo, il caos e il vuoto rappresentano elementi strutturali, battaglie come quella per i diritti gay sono perlopiù funzionali al sistema e le politiche ambientaliste rappresentano spesso una verniciatura di verde agli interessi della grande industria. Il conflitto politico non conosce più nessuna sintesi: gli elettori votano ad umori e i partiti non hanno uno straccio di idea: l’unica ideologia che resta è il mercato, la progettualità amministrativa rimane un mistero.</p>
<p>La situazione prelude ad altri scontri e ad altri crolli, nei quali ha larga parte, oltre all’instabilità, anche l’inconsapevolezza. E se le destre sembrano fortemente ridimensionate e giocheranno il loro opportunismo in modi ancora più biechi del solito, gettandosi su questioni quali l’Europa sempre sfuggire alla loro comprensione, resteranno a fronteggiarsi i protagonisti asimmetrici di questa fase della sempre tragicomica politica italiana: M5S e Renzi.</p>
<p>Nonostante i proclami altisonanti, il M5S è in larga misura ancora un puzzle di populismo, approssimazione e rancore che non riesce ad uscire dall’ombra del sistema a cui dice di opporsi (e ad ogni modo è un sistema meritevole soltanto di essere distrutto). Al di là di limiti e ambiguità, le riforme tentate da Renzi rappresentano ad oggi l’unico tentativo effettivo di aggiornare quella sballata macchina istituzionale che ha contribuito ad avere 63 governi in 70 anni (anni così densi di cambiamenti che è comunque impossibile ridurli ad un unico periodo).</p>
<p>Renzi è stato cresciuto dalla DC ed è figlio illegittimo di D’Alema e Berlusconi: per quanto sia una specie di mostro mutante, è uno dei pochi a sapere che fare politica significa prendere decisioni; potrebbe così sopravvivere al suo stesso partito, del quale è poi anche uno dei principali demolitori. Mentre resta al governo, già prescinde ampiamente da un PD ridotto ad un patchwork di clientele così male assortite che alla fine si delegittima da sé, rendendo ridondante ogni satira possibili. Quello che sembra inequivocabile è che &nbsp;sconfitta di questo&nbsp;PD&nbsp;era necessaria, tanto per sbloccare la città quanto per rinnovare la politica.</p>
<p>La vittoria del movimento fondato da Grillo si è registrata in realtà locali tra loro irriducibili e la cui somma non fa un Paese: così, invece di lasciare andare a entusiasmi da capoclasse volenterosi, militanti e simpatizzanti farebbero bene a vedere le cose che hanno di fronte e non quelle che vogliono vedere. Per tutti, è importante non contare soltanto fino a due e così riconoscere la presenza di alternative più articolate. Perché possa esistere un dibattito è però necessario documentarsi e ragionare, facendo lo sforzo di riconoscere le competenze che sono alla base di una cultura effettiva e ne permettono il formarsi. Questo è abbastanza diverso dalla logica del commento selvaggio che rappresenta ancora il nucleo ideologico del grillismo e inoltre&nbsp;coinvolge come lebbra il gran parte del cosiddetto popolo del web.</p>
<p>Il dato elettorale è composito, e la percentuale di elettori piuttosto bassa. A Roma la vittoria era scontata, ma le difficoltà sono soltanto all’inizio. A Torino il M5S ha vinto a sorpresa e con i voti della destra. A Napoli ha stravinto una lista di Sinistra indipendente in rotta con tutti gli schieramenti. A Milano si riconferma la coalizione di sinistra e scompare la destra. A Bologna sembrerebbe accadere la medesima cosa. Un’analisi onesta può mettere di fronte alle contraddizioni che animano tali risultati. La capitale del Paese e la città nel quale è nato si spostano verso un cambiamento più desiderato che vissuto. Quella più atipica conferma un trend non duplicatile. Quella più europea si assesta pragmaticamente su una sinistra riformista che ha già dato risultati decenti. Quella che rappresentava la culla dell’alternativa si riconferma di sinistra ma soltanto per un lobbismo ormai cronicizzato.</p>
<p>Inoltre, occorre rendersi conto a livello nazionale le resistenze più forti al cambiamento non provengono affatto da Renzi, ma proprio da tutti quelli che si sentono minacciati dalla sua riforma che, pur con tutti i limiti da cui è affetta, nell’intento di ridefinire gli assetti istituzionali arriva a minare le basi stesse di poteri che da&nbsp;tempo hanno esaurito degne&nbsp;funzioni di rappresentanza. Infatti, mantenere un parlamento bicamerale paritetico e le Regioni così come sono significa tenere ancora in piedi un bel pezzo della macchina della corruzione. Va poi considerato un altro tipo di attenzione nel tenere ferme le riforme, in quanto la revisione della legge elettorale prevista dall’Italicum potrebbe rendere difficile replicare in futuro un risultato come questo.</p>
<p>Un paio di scenari sulle reazioni. Il PD continuerà a sfaldarsi secondo le faglie già individuatesi, ritorneranno in vita varie teste tagliate, la dirigenza cercherà qualche capro espiatorio e butterà via un po’ di cavoli marci: sarebbe più dignitoso che il partito venga sciolto per dare vita ad almeno tre formazioni diverse, di cui almeno una comunista, in modo da rendere un minimo di dignità ad un’eredità sin troppo svilita e rilanciarne qualche prospettiva. Il M5S dovrà stemperare i propri ingenui entusiasmi confrontandosi con le difficoltà reali, aggravate dal fatto che le amministrazioni da lui guidate saranno fortemente ostacolate a diversi livelli: i rapporti con tutte le altre istituzioni, la mera burocrazia, un’informazione che non informa affatto. Inoltre, per far sopravvivere qualcosa delle istanze effettive, se è per avvero un movimento dovrà conoscere un termine per confluire in qualche nuovo progetto.</p>
<p>In definitiva, per ottenere qualche cambiamento strutturale è indispensabile che si approfondisca la forte destabilizzazione che ormai si è già avviata. Probabilmente, a permettere cambiamenti effettivi in un periodo di medio-lungo potrebbe essere proprio l’azione parallela di diversi fattori tra loro contrastanti: revisione dell’Europa, riforma del Senato e istituzione delle Aree metropolitane, oltre a tanti tanti tanti repulisti di realtà gravemente compromesse da un potere che ha intrecciato tra loro gli interessi di parte più corrotti. Ci vorrà tempo, c’è poco da festeggiare per chiunque. Per l’ancora acerbo M5S le prime cose da affrontare&nbsp;saranno le contraddizioni interne, le opposizioni dei palazzi, le inevitabili continuità istituzionali, e ci vorrà almeno qualche mese: un periodo sufficiente per scontentare tutti. Insomma, bisognerà&nbsp;riconoscere&nbsp;i limiti di ogni battaglia, non vantarsi di risultati parziali, non gettarsi in&nbsp;massacri inutili: saper vincere è anche questo.</p>
<p>•</p>
<p><em>Fotografia: Claudio Comandini, “Finita la carta” - Frascati, aprile 2006.</em></p>


</main> 
  </div>
</div>
 <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiato!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiato!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/grandtour\.shop");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>