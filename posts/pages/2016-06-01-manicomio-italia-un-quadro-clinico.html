<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="it" xml:lang="it"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Andrea Purga">

<title>Grand Tour - Manicomio Italia: un quadro clinico</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nessun risultato",
    "search-matching-documents-text": "documenti trovati",
    "search-copy-link-title": "Copiare il link nella ricerca",
    "search-hide-matches-text": "Nascondere i risultati aggiuntivi",
    "search-more-match-text": "ci sono altri risultati in questo documento",
    "search-more-matches-text": "ulteriori risultati in questo documento",
    "search-clear-button-title": "Pulire",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancellare",
    "search-submit-button-title": "Inviare",
    "search-label": "Ricerca"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Grand Tour</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Ricerca"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Attiva/disattiva la navigazione" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../diario.html#category=Claudio Comandini"> 
<span class="menu-text">Claudio Comandini</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../scritture.html"> 
<span class="menu-text">Scritture</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">contatti</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/groups/4880518/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/tweet_scritture"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.facebook.com/search/scritturemagazine"> <i class="bi bi-facebook" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:grandtour.frascati@gmail.com"> <i class="bi bi-envelope" role="img" aria-label="Email">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Manicomio Italia: un quadro clinico</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">società</div>
              </div>
                  </div>
  </div>
  <div class="quarto-title-meta">
      <div>
      <div class="quarto-title-meta-heading">di</div>
      <div class="quarto-title-meta-contents">
               <p>Andrea Purga </p>
            </div>
    </div>
      <div>
      <div class="quarto-title-meta-heading">Data di Pubblicazione</div>
      <div class="quarto-title-meta-contents">
        <p class="date">1 giugno 2016</p>
      </div>
    </div>
    </div>
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<div class="quarto-about-marquee content">
  <div class="about-image-container">
    <img src="/images/2016/06/madness-blackwhite-640x381.jpg" class="about-image " style="width: 100%;">
  </div>
  <div class="about-contents">
     <main class="content quarto-banner-title-block" id="quarto-document-content">
<p><em>Il paziente Italia non è difficile da riconoscere. Quattro i sintomi individuati dallo psichiatra e scrittore Vittorino Andreoli (Verona, 1940) in questa intervista di Andrea Purgatori: vengono qui riassunti per comune utilità, perché, se non è una propriamente una malattia, superficialità e faciloneria sono comunque diffuse, e fa fatica leggere e pensare per davvero. Masochismo nascosto dietro la maschera di un esibizionismo atto a compensare l’impotenza. Individualismo spietato e crudele esteso al massimo ad un piccolissimo clan, forse ad un amante, ma non alla moglie. Patologia della recita, esistere per quello che di dice e parlare sempre, convincendosi delle proprie menzogne. Fede in miracoli assurdi che portano a convincersi che non vale la pena di fare assolutamente niente. Ci può forse salvare la depressione anaclitica, tipica degli uomini di cultura, che leggono Ungaretti quel verso stupendo che dice più o meno: «l’uomo… attaccato nel vuoto al suo filo di ragno». Tuttavia, può bastare?</em></p>
<p><em>«L’Italia è un paziente malato di mente. Malato grave. Dal punto di vista psichiatrico, direi che è da ricovero. Però non ci sono più i manicomi»</em>. Il professor <a href="http://www.andreoli.rcslibri.it/%22">Vittorino Andreoli, uno dei massimi esponenti della psichiatria contemporanea</a>, ex direttore del Dipartimento di psichiatria di Verona, membro della <a href="http://www.nyas.org/">New York Academy of Sciences</a>&nbsp;e presidente del <a href="http://it.wikipedia.org/wiki/Vittorino_Andreoli">Section Committee on Psychopathology of Expression della World Psychiatric Association</a>&nbsp;ha messo idealmente sul lettino questo Paese che si dibatte tra crisi economica e caos politico e si è fatto un’idea precisa del malessere del suo popolo. Un’idea drammatica. Con una premessa: <em>«Che io vedo gli italiani da italiano, in questo momento particolare. Quindi, sia chiaro che questa è una visione degli altri e nello stesso tempo di me. Come in uno specchio»</em>.</p>
<p><strong>Quali sono i sintomi della malattia mentale dell’Italia, professor Andreoli?</strong></p>
<p><em>Ne ho individuati quattro. Il primo lo definirei “masochismo nascosto”. Il piacere di trattarsi male e quasi goderne. Però, dietro la maschera dell’esibizionismo.</em></p>
<p><strong>Mi faccia capire questa storia della maschera.</strong></p>
<p><em>Beh, basta ascoltare gli italiani e i racconti meravigliosi delle loro vacanze, della loro famiglia. Ho fatto questo, ho fatto quello. Sono stato in quel ristorante, il più caro naturalmente. Mio figlio è straordinario, quello piccolo poi…</em></p>
<p><strong>Esibizionisti.</strong></p>
<p><em>Ma certo, è questa la maschera che nasconde il masochismo. E poi tenga presente che generalmente l’esibizionismo è un disturbo della sessualità. Mostrare il proprio organo, ma non perché sia potente. Per compensare l’impotenza.</em></p>
<p><strong>Viene da pensare a certi politici. Anzi, a un politico in particolare.</strong></p>
<p><em>Pensi pure quello che vuole. Io faccio lo psichiatra e le parlo di questo sintomo degli italiani, di noi italiani. Del masochismo mascherato dall’esibizionismo. Tipo: non ho una lira ma mostro il portafoglio, anche se dentro non c’è niente. Oppure: sono vecchio, però metto un paio di jeans per sembrare più giovane e una conchiglia nel punto dove lei sa, così sembra che lì ci sia qualcosa e invece non c’è niente.</em></p>
<p><strong>Secondo sintomo.</strong></p>
<p><em>L’individualismo spietato. E badi che ci tengo a questo aggettivo. Perché un certo individualismo è normale, uno deve avere la sua identità a cui si attacca la stima. Ma quando diventa spietato…</em></p>
<p><strong>Cattivo.</strong></p>
<p><em>Sì, ma spietato è ancora di più. Immagini dieci persone su una scialuppa, col mare agitato e il rischio di andare sotto. Ecco, invece di dire «cosa possiamo fare insieme noi dieci per salvarci?», scatta l’io. Io faccio così, io posso nuotare, io me la cavo in questo modo… individualismo spietato, che al massimo si estende a un piccolissimo clan. Magari alla ragazza che sta insieme a te sulla scialuppa. All’amante più che alla moglie, forse a un amico. Quindi, quando parliamo di gruppo, in realtà parliamo di individualismo allargato.</em></p>
<p><strong>Terzo sintomo della malattia mentale degli italiani?</strong></p>
<p><em>La recita.</em></p>
<p><strong>La recita?</strong></p>
<p><em>Aaaahhh, proprio così… noi non esistiamo se non parliamo. Noi esistiamo per quello che diciamo, non per quello che abbiamo fatto. Ecco la patologia della recita: l’italiano indossa la maschera e non sa più qual è il suo volto. Guarda uno spettacolo a teatro o un film, ma non gli basta. No, sta bene solo se recita, se diventa lui l’attore. Guarda il film e parla. Ah, che meraviglia: sto parlando, tutti mi dovete ascoltare. Ma li ha visti gli inglesi?.</em></p>
<p><strong>Che fanno gli inglesi?</strong></p>
<p><em>Non parlano mai. Invece noi parliamo anche quando ascoltiamo la musica, quando leggiamo il giornale. Mi permetta di ricordare uno che aveva capito benissimo gli italiani, che era Luigi Pirandello. Aveva capito la follia perché aveva una moglie malata di mente. Uno nessuno e centomila è una delle più grandi opere mai scritte ed è perfetta per comprendere la nostra malattia mentale.</em></p>
<p><strong>Torniamo ai sintomi, professore.</strong></p>
<p><em>No, no. Rimaniamo alla maschera. Pensi a quelli che vanno in vacanza. Dicono che sono stati fuori quindici giorni e invece è una settimana. Oppure raccontano che hanno una terrazza stupenda e invece vivono in un monolocale con un’unica finestra e un vaso di fiori secchi sul davanzale. Non è magnifico? E a forza di raccontarlo, quando vanno a casa si convincono di avere sul serio una terrazza piena di piante. E poi c’è il quarto sintomo, importantissimo. Riguarda la fede…</em></p>
<p><strong>Con la fede non si scherza.</strong></p>
<p><em>Mica quella in dio, lasciamo perdere. Io parlo del credere. Pensare che domani, alle otto del mattino ci sarà il miracolo. Poi se li fa dio, San Gennaro o chiunque altro poco importa. Insomma, per capirci, noi viviamo in un disastro, in una cloaca ma crediamo che domattina alle otto ci sarà il miracolo che ci cambia la vita. Aspettiamo Godot, che non c’è. Ma vai a spiegarlo agli italiani. Che cazzo vuoi, ti rispondono. Domattina alle otto arriva Godot. Quindi, non vale la pena di fare niente. È una fede incredibile, anche se detta così sembra un paradosso. Chi se ne importa se ci governa uno o l’altro, se viene il padre eterno o Berlusconi, chi se ne importa dei conti e della Corte dei conti, tanto domattina alle otto c’è il miracolo.</em></p>
<p><strong>Masochismo nascosto, individualismo spietato, recita, fede nel miracolo. Siamo messi malissimo, professor Andreoli.</strong></p>
<p><em>Proprio così. Nessuno psichiatra può salvare questo paziente che è l’Italia. Non posso nemmeno toglierti questi sintomi, perché senza ti sentiresti morto. Se ti togliessi la maschera ti vergogneresti, perché abbiamo perso la faccia dappertutto. Se ti togliessi la fede, ti vedresti meschino. Insomma, se trattassimo questo paziente secondo la ragione, secondo la psichiatria, lo metteremmo in una condizione che lo aggraverebbe. In conclusione, senza questi sintomi il popolo italiano non potrebbe che andare verso un suicidio di massa.</em></p>
<p><strong>E allora?</strong></p>
<p><em>Allora ci vorrebbe il manicomio. Ma siccome siamo tanti, l’unica considerazione è che il manicomio è l’Italia. E l’unico sano, che potrebbe essere lo psichiatra, visto da tutti questi malati è considerato matto.</em></p>
<p><strong>Scherza o dice sul serio?</strong></p>
<p><em>Ho cercato di usare un tono realistico facendo dell’ironia, un tono italiano. Però adesso le dico che ogni criterio di buona economia o di buona politica su di noi non funziona, perché in questo momento la nostra malattia è vista come una salvezza. È come se dicessi a un credente che dio non esiste e che invece di pregare dovrebbe andare in piazza a fare la rivoluzione. Oppure, da psichiatra, dovrei dire a tutti quelli che stanno facendo le vacanze, ma in realtà non le fanno perché non hanno una lira, tornate a casa e andate in piazza, andate a votare, togliete il potere a quello che dice che bisogna abbattere la magistratura perché non fa quello che vuole lui. Ma non lo farebbero, perché si mettono la maschera e dicono che gli va tutto benissimo.</em></p>
<p><strong>Guardi, professore, che non sono tutti malati. Ci sono anche molti sani in circolazione. Secondo lei che fanno?</strong></p>
<p><em>Piangono, si lamentano. Ma non sono sani, sono malati anche loro. Sono vicini a una depressione che noi psichiatri chiamiamo anaclitica. Penso agli uomini di cultura, quelli veri. Che ormai leggono solo Ungaretti e magari quel verso stupendo che andrebbe benissimo per il paziente Italia che abbiamo visitato adesso e dice più o meno: l’uomo… attaccato nel vuoto al suo filo di ragno.</em></p>
<p><strong>E lei, perché non se ne va?</strong></p>
<p><em>Perché faccio lo psichiatra, e vedo persone molto più disperate di me.</em></p>
<p><strong>Grazie della seduta, professore.</strong></p>
<p><em>Prego.</em></p>
<p>•</p>
<p><a href="http://www.huffingtonpost.it/2013/08/06/vittorino-andreoli-intervista-italia-malato-psichiatrico_n_3712591.html"><em>Vittorino Andreoli - Andrea Purgatori, “L’Italia è un Paese malato di mente. Esibizionisti, individualisti, masochisti, fatalisti”, «Huffington Post» 06/08/2013 - aggiornato 31/05/2016.</em></a></p>
<p><em>Illustrazione: “Madness” (DasWortgewand)</em></p>


</main> 
  </div>
</div>
 <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiato!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiato!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>